export const sessionNotesData = [
  {
    id: "it115-s3103-2025-07-28-2046",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "John Dela Cruz",
    dateTime: "July 28, 2025 - 8:46 PM",
    excerpt:
      "08:46 — Recap: inconsistent actor lifelines on prior draft. Student showed improvement in understanding UML sequence diagrams...",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-07-30-1530",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Maria Santos",
    dateTime: "July 30, 2025 - 3:30 PM",
    excerpt:
      "Covered principles of responsive web design using flex and grid. Student grasped mobile-first approach quickly...",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-08-05-1300",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Carlos Rodriguez",
    dateTime: "August 5, 2025 - 1:00 PM",
    excerpt:
      "Reviewed IPv4 addressing and subnetting exercises. Need to work more on CIDR notation...",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-08-08-1000",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Anna Villanueva",
    dateTime: "August 8, 2025 - 10:00 AM",
    excerpt:
      "Discussed usability testing methodologies and user feedback analysis. Student showed excellent understanding of user personas...",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-08-10-1600",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Miguel Torres",
    dateTime: "August 10, 2025 - 4:00 PM",
    excerpt:
      "Explored advanced chart types and interactive dashboard elements. Student created impressive D3.js visualization...",
    duration: "70 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-08-12-1400",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Isabella Garcia",
    dateTime: "August 12, 2025 - 2:00 PM",
    excerpt:
      "Practiced responsive grid layouts and semantic HTML structure for mobile-first approach.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-08-12-1630",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "David Kim",
    dateTime: "August 12, 2025 - 4:30 PM",
    excerpt:
      "Walked through binary to dotted-decimal conversions and subnet masks.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-08-14-0900",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Emma Thompson",
    dateTime: "August 14, 2025 - 9:00 AM",
    excerpt:
      "Heuristic evaluation exercise; identified visibility-of-system-status gaps.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-08-14-1530",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Michael Brown",
    dateTime: "August 14, 2025 - 3:30 PM",
    excerpt:
      "Compared bar vs. line for trend clarity; emphasized color accessibility.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-08-16-1000",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Sarah Johnson",
    dateTime: "August 16, 2025 - 10:00 AM",
    excerpt: "Refined sequence diagram messages and lifeline activation boxes.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-08-18-1330",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Kevin Lee",
    dateTime: "August 18, 2025 - 1:30 PM",
    excerpt: "CSS clamp() practice for fluid typography across breakpoints.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-08-18-1600",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Lisa Wang",
    dateTime: "August 18, 2025 - 4:00 PM",
    excerpt: "CIDR notation drills and route summarization overview.",
    duration: "65 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-08-20-1000",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Daniel Martinez",
    dateTime: "August 20, 2025 - 10:00 AM",
    excerpt: "Created paper prototypes; discussed think-aloud protocol basics.",
    duration: "40 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-08-20-1500",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Rachel Davis",
    dateTime: "August 20, 2025 - 3:00 PM",
    excerpt: "Explored chartjunk pitfalls and data-ink ratio improvements.",
    duration: "70 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-08-22-1100",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Anthony Reyes",
    dateTime: "August 22, 2025 - 11:00 AM",
    excerpt: "Use-case to sequence traceability; clarified alt/opt fragments.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-08-24-1400",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Jessica Lopez",
    dateTime: "August 24, 2025 - 2:00 PM",
    excerpt: "Grid template areas vs. repeat(); built a responsive gallery.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-08-24-1630",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Christopher Tan",
    dateTime: "August 24, 2025 - 4:30 PM",
    excerpt: "ARP behavior and basic Wireshark capture interpretation.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-08-26-0930",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Amanda Smith",
    dateTime: "August 26, 2025 - 9:30 AM",
    excerpt: "Persona refinement; mapped tasks to user journeys.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-08-26-1600",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Ryan Gonzales",
    dateTime: "August 26, 2025 - 4:00 PM",
    excerpt: "Animated transitions for state changes; avoided misreading.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-08-28-1000",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Nicole Cruz",
    dateTime: "August 28, 2025 - 10:00 AM",
    excerpt: "Interaction lifelines vs. control objects; clarified roles.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-08-28-1400",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Brandon Hernandez",
    dateTime: "August 28, 2025 - 2:00 PM",
    excerpt: "CSS container queries intro and practical constraints.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-08-30-1500",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Stephanie Yang",
    dateTime: "August 30, 2025 - 3:00 PM",
    excerpt: "IPv6 addressing overview and neighbor discovery basics.",
    duration: "65 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-08-30-1700",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Jonathan Miller",
    dateTime: "August 30, 2025 - 5:00 PM",
    excerpt: "Usability test script creation and pilot session review.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-09-02-1000",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Ashley Nguyen",
    dateTime: "September 2, 2025 - 10:00 AM",
    excerpt: "Small multiples for comparing categories; legends vs labels.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-09-02-1530",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Tyler Anderson",
    dateTime: "September 2, 2025 - 3:30 PM",
    excerpt: "Guard conditions and activation constraints; refined messages.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-09-04-1330",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Samantha Wilson",
    dateTime: "September 4, 2025 - 1:30 PM",
    excerpt: "Progressive enhancement; built core-first then layered JS.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-09-04-1600",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Jordan Garcia",
    dateTime: "September 4, 2025 - 4:00 PM",
    excerpt: "Intro to routing metrics and static routes vs. dynamic.",
    duration: "70 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-09-06-1000",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Megan Jones",
    dateTime: "September 6, 2025 - 10:00 AM",
    excerpt: "Affinity diagramming for usability findings clustering.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-09-06-1500",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Austin Taylor",
    dateTime: "September 6, 2025 - 3:00 PM",
    excerpt: "Annotation layer techniques and direct labeling.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-09-08-1100",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Brittany Thomas",
    dateTime: "September 8, 2025 - 11:00 AM",
    excerpt: "Combined fragments (loop, par) with clear entry/exit notes.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-09-08-1400",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Zachary Jackson",
    dateTime: "September 8, 2025 - 2:00 PM",
    excerpt: "ARIA roles overview and keyboard navigation patterns.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it104-a2101-2025-09-10-1530",
    subject: "MO-IT104 Computer Networks",
    section: "A2101",
    student: "Courtney White",
    dateTime: "September 10, 2025 - 3:30 PM",
    excerpt: "OSI vs. TCP/IP model alignment; mapped protocols by layer.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it105-h2102-2025-09-10-1700",
    subject: "MO-IT105 Human-Computer Interaction",
    section: "H2102",
    student: "Trevor Harris",
    dateTime: "September 10, 2025 - 5:00 PM",
    excerpt: "Error prevention and recovery microcopy improvements.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it117-h3103-2025-09-12-1000",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3103",
    student: "Alexis Martin",
    dateTime: "September 12, 2025 - 10:00 AM",
    excerpt: "Choropleth pitfalls; normalized rates vs. raw counts.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it115-s3103-2025-09-12-1500",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3103",
    student: "Cameron Thompson",
    dateTime: "September 12, 2025 - 3:00 PM",
    excerpt: "Refactored lifelines into clearer controller/entity roles.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it161-a3103-2025-09-14-1330",
    subject: "MO-IT161 Web Systems and Technology",
    section: "A3103",
    student: "Jasmine Clark",
    dateTime: "September 14, 2025 - 1:30 PM",
    excerpt: "Fetch API basics; graceful error states and retries.",
    duration: "55 minutes",
    status: "completed",
  },
];

// seedSessionsAndFeedback.js

// 1) Define a small teacher directory (multiple teachers per subject/sections for variety)
export const teachers = [
  {
    id: "t-santos",
    name: "Prof. Liza Santos",
    subjects: ["MO-IT161"],
    sections: ["A3103", "A3101"],
  },
  {
    id: "t-lim",
    name: "Engr. Paolo Lim",
    subjects: ["MO-IT161"],
    sections: ["A3102", "A3103"],
  },
  {
    id: "t-dizon",
    name: "Engr. Carlo Dizon",
    subjects: ["MO-IT104"],
    sections: ["A2101", "A2102"],
  },
  {
    id: "t-tan",
    name: "Prof. Mei Tan",
    subjects: ["MO-IT105"],
    sections: ["H2102", "H2101"],
  },
  {
    id: "t-reyes",
    name: "Dr. Arman Reyes",
    subjects: ["MO-IT117"],
    sections: ["H3103", "H3101"],
  },
  {
    id: "t-ncruz",
    name: "Prof. Nina Cruz",
    subjects: ["MO-IT115"],
    sections: ["S3103", "S3101"],
  },
  {
    id: "t-ramirez",
    name: "Engr. Victor Ramirez",
    subjects: ["MO-IT151"],
    sections: ["P3101", "P3102"],
  },
  {
    id: "t-ortega",
    name: "Prof. Diana Ortega",
    subjects: ["MO-IT200D1"],
    sections: ["C4101"],
  },
];

// Helper to pick a teacher who actually teaches that subject/section (falls back sensibly)
function pickTeacherFor(subject, section) {
  const pool = teachers.filter(
    (t) =>
      t.subjects.includes(subject) &&
      (t.sections.includes(section) || t.sections.length === 0)
  );
  if (pool.length)
    return pool[(section?.length + subject?.length) % pool.length];

  const bySubject = teachers.filter((t) => t.subjects.includes(subject));
  if (bySubject.length) return bySubject[subject.length % bySubject.length];

  return teachers[(subject?.length || 0) % teachers.length];
}

// 2) Attach teachers to ANY session array you pass in (won’t mutate your original)
export function attachTeachers(sessions) {
  return sessions.map((s) => {
    const teacher = pickTeacherFor(s.subject, s.section);
    return { ...s, teacherId: teacher.id, teacher: teacher.name };
  });
}

// 3) Generate just-enough feedback: exactly 1 feedback per session
//    → You’ll still get per-teacher averages because each teacher has multiple sessions.
const subjectComments = {
  "MO-IT161": [
    "Clean responsive layout; minor a11y notes.",
    "Solid use of semantic HTML; keep refining ARIA.",
    "Good grid usage; clarify breakpoints.",
  ],
  "MO-IT104": [
    "Subnetting improved; watch for off-by-one in masks.",
    "Clear ARP explanation; capture filters next.",
    "Good IPv6 intro; practice NDP scenarios.",
  ],
  "MO-IT105": [
    "Heuristics applied well; refine microcopy.",
    "Personas realistic; strengthen task coverage.",
    "Great usability script; pilot notes helpful.",
  ],
  "MO-IT117": [
    "Legible color choices; labels > legends worked.",
    "Nice small multiples; avoid clutter on hover.",
    "Clear annotations; consistent scales throughout.",
  ],
  "MO-IT115": [
    "Sequence lifelines cleaner; good guards.",
    "Nice fragment use; clarify alt vs opt scope.",
    "Better control/entity split; messages precise.",
  ],
  "MO-IT151": [
    "Docker basics solid; compose file organized.",
    "CI pipeline passes; add linting stage next.",
    "Good metrics exposure; tighten timeouts.",
  ],
  "MO-IT200D1": [
    "Scope crisp; risks/mitigations aligned.",
    "Milestones realistic; add buffer for testing.",
    "Stakeholder map clear; measure success early.",
  ],
};

// Deterministic 3–5 rating with light subject weighting (no RNG)
function scoreFor(subject, idx) {
  const base = 3 + (((subject?.length || 0) + idx) % 3); // 3..5
  return Math.min(5, Math.max(3, base));
}

export function makeInitialFeedback(sessions) {
  const withTeachers = attachTeachers(sessions);
  return withTeachers.map((s, i) => {
    const opts = subjectComments[s.subject] || [];
    const comment = opts[i % opts.length];
    const rating = scoreFor(s.subject, i);
    return {
      id: `FB-${s.id}`,
      sessionId: s.id,
      teacherId: s.teacherId,
      rating, // integer 3..5
      comment,
      createdAt: new Date().toISOString(),
    };
  });
}

// 4) (Optional) Compute per-teacher averages
export function computeTeacherAverages(sessions, feedback) {
  const withTeachers = attachTeachers(sessions);
  const byTeacher = new Map();

  withTeachers.forEach((s) => {
    const f = feedback.filter((x) => x.sessionId === s.id);
    if (!f.length) return;
    const cur = byTeacher.get(s.teacherId) || {
      teacher: s.teacher,
      count: 0,
      sum: 0,
    };
    cur.count += f.length;
    cur.sum += f.reduce((a, b) => a + b.rating, 0);
    byTeacher.set(s.teacherId, cur);
  });

  return Array.from(byTeacher.entries()).map(
    ([teacherId, { teacher, count, sum }]) => ({
      teacherId,
      teacher,
      average: Number((sum / count).toFixed(2)),
      ratingsCount: count,
    })
  );
}

// 5) (Optional) A few EXTRA sessions across new subjects/sections (already teacher-tagged)
export const extraSessionNotesData = attachTeachers([
  {
    id: "it151-p3101-2025-08-29-0930",
    subject: "MO-IT151 Platform Technologies",
    section: "P3101",
    student: "Noah Perez",
    dateTime: "August 29, 2025 - 9:30 AM",
    excerpt: "Containerized the API; added healthcheck route.",
    duration: "50 minutes",
    status: "completed",
  },
  {
    id: "it151-p3102-2025-09-03-1100",
    subject: "MO-IT151 Platform Technologies",
    section: "P3102",
    student: "Olivia Cruz",
    dateTime: "September 3, 2025 - 11:00 AM",
    excerpt: "GitHub Actions draft with build/test stages.",
    duration: "55 minutes",
    status: "completed",
  },
  {
    id: "it200-c4101-2025-09-05-1400",
    subject: "MO-IT200D1 Capstone 1",
    section: "C4101",
    student: "Ethan Ramos",
    dateTime: "September 5, 2025 - 2:00 PM",
    excerpt: "Defined success metrics; linked to milestones.",
    duration: "60 minutes",
    status: "completed",
  },
  {
    id: "it117-h3101-2025-09-07-1000",
    subject: "MO-IT117 Data Visualization Techniques",
    section: "H3101",
    student: "Ava Mendoza",
    dateTime: "September 7, 2025 - 10:00 AM",
    excerpt: "Evaluated diverging palettes for sentiment scale.",
    duration: "45 minutes",
    status: "completed",
  },
  {
    id: "it115-s3101-2025-09-09-1500",
    subject: "MO-IT115 Object-Oriented Analysis and Design",
    section: "S3101",
    student: "Jacob Alvarez",
    dateTime: "September 9, 2025 - 3:00 PM",
    excerpt: "Mapped use cases to controllers; reduced coupling.",
    duration: "50 minutes",
    status: "completed",
  },
]);
